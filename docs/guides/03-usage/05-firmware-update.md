# 固件更新


:::caution 注意

1. 更新ESP32固件会重置到出厂状态，无法保留配置，请谨慎操作。
2. 如果您的网关连接到PC上没反应，那么您应该检查您的type-c数据线，目前市面有大量的type-c线只具备充电功能，无法传输数据。请选择具备数据传输功能的数据线。

:::

:::tip

本教程用到的所有工具和固件都可在QQ群获取。[加入QQ群](https://jq.qq.com/?_wv=1027&k=BrUCR4mt)

:::

## EPS32固件更新


1. 准备一台PC主机，仅win系统可用。
2. 并务必先安装好CH340驱动。
3. 将网关拨动开关拨动开关按下表设置: 

> 1|ON
:---:|:---:
2|ON

4. 将网关用带数据传输功能的type-c数据线连接到已安装好驱动的主机上，打开ESP32烧录工具[flash_download_tool](https://www.espressif.com/sites/default/files/tools/flash_download_tool_3.9.5_0.zip)。

5. 如下图所示，`ChipType`选择为`ESP32`，其他地方保持默认，点击`OK`进入下一步。
   
![](/img/1.png)

6. 如下图所示，选择从QQ群里获取的固件文件 ( HL810PRO_CN_XXXXXXX.bin )，地址填写为`0x0`，`COM`下拉列表里选择网关的物理串口号，其余地方保持默认即可。
   
   * 先点击`ERASE`清除一下固件，
   * 再点击`START`，开始将固件烧录进芯片，等待进度条完成。预计烧录过程需要2分钟。

![](/img/2.png)


:::note 小提醒

1. 如果点击`ERASE`或者`START`后，长时间未响应，请检查拨动开关位置是否正确。
2. 如果不存在可选的网关物理串口号，请检查驱动是否安装正确，以及数据线是否有效。

:::

## CC2652P固件更新


1. 准备一台PC主机，仅WIN系统可用。
2. 并务必先安装好CH340驱动。
3. 将网关拨动开关拨动开关按下表设置：

> 1|OFF
:---:|:---:
2|OFF

4. 先打开CC2652P专用烧录工具(Flash Programmer 2)
5. 按住网关主板上的BOOT按钮，一直不要松开，然后将网关用type-c数据线连接到PC上，直到固件烧录成功，方可松开按钮。
6. 在烧录工具的界面左侧，串口选择列表中，选中`USB-SERIAL CH340K(COM x)`下方的`Unknown`，然后在下方的`Select Target Device`下拉选择框中，选择`CC2652P`
7. 在烧录工具的界面上方，选择好要烧录的固件文件 ( CC1352P2_CC2652P_other_coordinator_XXXXXX.bin )。其他地方均不要修改。
8. 点击右下方的圆形内部带三角的按钮，等待烧录成功。

:::caution 注意

固件文件的路径一定不能带中文，否则，烧录工具会报错，烧录失败。

:::


如下图所示：

![](/img/programmer.jpg)








